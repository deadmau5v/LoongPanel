const __vite__fileDeps=["assets/File-p7uZiIhW.js","assets/index-DQy_jDpp.js","assets/react-dom-B_KBoKIY.js","assets/index-C2Nb8ExH.css","assets/ProCard-BRA3H8zR.js","assets/index-ChBuhqYC.js","assets/button-B4MocTzm.js","assets/progress-6yScoXch.js","assets/index-Ctjzb3li.js","assets/FileOutlined-Ce6skVGH.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{I as u,a as m,C as f,u as p,j as i,_ as h}from"./index-DQy_jDpp.js";import{r as s}from"./react-dom-B_KBoKIY.js";import{R as x}from"./FileOutlined-Ce6skVGH.js";var _={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},I=function(a,r){return s.createElement(u,m({},a,{ref:r,icon:_}))},g=s.forwardRef(I);const k=s.lazy(()=>h(()=>import("./File-p7uZiIhW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])));function y(t,a=!0){const r=["B","KB","MB","GB"];let o=0;for(;t>=1024&&o<r.length-1;)t/=1024,o++;return t.toFixed(2)+(a?r[o]:"")}function d(t,a,r){fetch(r+"?path="+encodeURIComponent(t),{method:"GET",headers:{"Content-Type":"application/json",Cookie:document.cookie,Authorization:"Bearer "+document.cookie?document.cookie.split("=")[1]:""}}).then(o=>o.json()).then(o=>{console.log(o),a(o.files)})}function j(t){switch(t){case 0:return"root";default:return t}}function C(t){switch(t){case 0:return"root";default:return t}}function v(){const t=s.useContext(f),a=(t==null?void 0:t.API_URL)+"/api/v1/files/dir",[r,o]=s.useState([]),{logined:l}=p();l||(window.location.href="/login");const c=[{title:"",dataIndex:"icon",key:"icon",render:(n,e)=>e.isDir?i.jsx(g,{}):i.jsx(x,{})},{title:"文件名",dataIndex:"name",key:"name",render:(n,e)=>e.isDir?i.jsx("a",{onClick:()=>d(e.path,o,a),children:e.name}):e.name,sorter:(n,e)=>n.name.localeCompare(e.name)},{title:"大小",dataIndex:"size",key:"size",render:(n,e)=>e.isDir?"":y(e.size),sorter:(n,e)=>n.isDir?1:n.size-e.size},{title:"路径",dataIndex:"path",key:"path",sorter:(n,e)=>n.path.localeCompare(e.path)},{title:"所有者",dataIndex:"user",key:"user",render:(n,e)=>j(e.user)},{title:"所属组",dataIndex:"group",key:"group",render:(n,e)=>C(e.group)},{title:"权限",dataIndex:"mode",key:"mode"},{title:"修改时间",dataIndex:"time",key:"time"}];return s.useEffect(()=>{d("/",o,a)},[]),i.jsx(i.Fragment,{children:i.jsx(s.Suspense,{fallback:i.jsx("div",{children:"Loading..."}),children:i.jsx(k,{columns:c,dataSource:r})})})}const w=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));export{w as F,g as R};
