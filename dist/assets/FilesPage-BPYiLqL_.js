const __vite__fileDeps=["assets/File-C6KhKrMp.js","assets/index-Bn9719FT.js","assets/react-dom-D8wjeNdT.js","assets/index-C2Nb8ExH.css","assets/App-BmPGc7xx.js","assets/ProCard-8l2jX2tj.js","assets/index-BqGF7ijf.js","assets/button-Ban0RNZM.js","assets/progress-DRPAoBHR.js","assets/index-3jKJ5y8f.js","assets/FileOutlined-BGq_989-.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{C as c,j as i,_ as u}from"./index-Bn9719FT.js";import{r as s}from"./react-dom-D8wjeNdT.js";import{I as m,_ as p}from"./App-BmPGc7xx.js";import{R as f}from"./FileOutlined-BGq_989-.js";var h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},x=function(r,a){return s.createElement(m,p({},r,{ref:a,icon:h}))},_=s.forwardRef(x);const I=s.lazy(()=>u(()=>import("./File-C6KhKrMp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])));function g(t,r=!0){const a=["B","KB","MB","GB"];let o=0;for(;t>=1024&&o<a.length-1;)t/=1024,o++;return t.toFixed(2)+(r?a[o]:"")}function d(t,r,a){fetch(a+"?path="+encodeURIComponent(t),{method:"GET",headers:{"Content-Type":"application/json",Cookie:document.cookie,Authorization:"Bearer "+document.cookie?document.cookie.split("=")[1]:""}}).then(o=>o.json()).then(o=>{console.log(o),r(o.files)})}function k(t){switch(t){case 0:return"root";default:return t}}function y(t){switch(t){case 0:return"root";default:return t}}function j(){const t=s.useContext(c),r=(t==null?void 0:t.API_URL)+"/api/v1/files/dir",[a,o]=s.useState([]),l=[{title:"",dataIndex:"icon",key:"icon",render:(n,e)=>e.isDir?i.jsx(_,{}):i.jsx(f,{})},{title:"文件名",dataIndex:"name",key:"name",render:(n,e)=>e.isDir?i.jsx("a",{onClick:()=>d(e.path,o,r),children:e.name}):e.name,sorter:(n,e)=>n.name.localeCompare(e.name)},{title:"大小",dataIndex:"size",key:"size",render:(n,e)=>e.isDir?"":g(e.size),sorter:(n,e)=>n.isDir?1:n.size-e.size},{title:"路径",dataIndex:"path",key:"path",sorter:(n,e)=>n.path.localeCompare(e.path)},{title:"所有者",dataIndex:"user",key:"user",render:(n,e)=>k(e.user)},{title:"所属组",dataIndex:"group",key:"group",render:(n,e)=>y(e.group)},{title:"权限",dataIndex:"mode",key:"mode"},{title:"修改时间",dataIndex:"time",key:"time"}];return s.useEffect(()=>{d("/",o,r)},[]),i.jsx(i.Fragment,{children:i.jsx(s.Suspense,{fallback:i.jsx("div",{children:"Loading..."}),children:i.jsx(I,{columns:l,dataSource:a})})})}const R=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));export{R as F,_ as R};
