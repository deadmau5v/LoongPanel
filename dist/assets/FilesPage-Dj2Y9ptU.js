/*
 * 创建人： deadmau5v
 * 创建时间： 2024-0-0
 * 文件作用：
 */

const __vite__fileDeps=["assets/File-yugmZdnS.js","assets/index-tED-CDpK.js","assets/react-dom-D8wjeNdT.js","assets/index-C2Nb8ExH.css","assets/App-CzhtfASx.js","assets/ProCard-CYhq6AVU.js","assets/button-BH9dxYVg.js","assets/progress-yH0H2jOw.js","assets/index-TpALCARo.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{C as m,j as s,_ as f}from"./index-tED-CDpK.js";import{r as i}from"./react-dom-D8wjeNdT.js";import{I as d,_ as c}from"./App-CzhtfASx.js";var h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},p=function(r,o){return i.createElement(d,c({},r,{ref:o,icon:h}))},x=i.forwardRef(p),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},v=function(r,o){return i.createElement(d,c({},r,{ref:o,icon:_}))},g=i.forwardRef(v);const I=i.lazy(()=>f(()=>import("./File-yugmZdnS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function y(t,r=!0){const o=["B","KB","MB","GB"];let n=0;for(;t>=1024&&n<o.length-1;)t/=1024,n++;return t.toFixed(2)+(r?o[n]:"")}function l(t,r,o){fetch(o+"?path="+encodeURIComponent(t)).then(n=>n.json()).then(n=>{console.log(n),r(n.files)})}function j(t){switch(t){case 0:return"root";default:return t}}function z(t){switch(t){case 0:return"root";default:return t}}function F(){const t=i.useContext(m),r=(t==null?void 0:t.API_URL)+"/api/v1/files/dir",[o,n]=i.useState([]),u=[{title:"",dataIndex:"icon",key:"icon",render:(a,e)=>e.isDir?s.jsx(g,{}):s.jsx(x,{})},{title:"文件名",dataIndex:"name",key:"name",render:(a,e)=>e.isDir?s.jsx("a",{onClick:()=>l(e.path,n,r),children:e.name}):e.name,sorter:(a,e)=>a.name.localeCompare(e.name)},{title:"大小",dataIndex:"size",key:"size",render:(a,e)=>e.isDir?"":y(e.size),sorter:(a,e)=>a.isDir?1:a.size-e.size},{title:"路径",dataIndex:"path",key:"path",sorter:(a,e)=>a.path.localeCompare(e.path)},{title:"所有者",dataIndex:"user",key:"user",render:(a,e)=>j(e.user)},{title:"所属组",dataIndex:"group",key:"group",render:(a,e)=>z(e.group)},{title:"权限",dataIndex:"mode",key:"mode"},{title:"修改时间",dataIndex:"time",key:"time"}];return i.useEffect(()=>{l("/",n,r)},[]),s.jsx(s.Fragment,{children:s.jsx(i.Suspense,{fallback:s.jsx("div",{children:"Loading..."}),children:s.jsx(I,{columns:u,dataSource:o})})})}const R=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{R as F,x as R,g as a};
